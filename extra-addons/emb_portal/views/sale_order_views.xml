<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <data>
        <!-- Custom product.form 此处安装时，有BUG， 需要修改product_normal_form_view 为product_template_form_view， 然后再改回来s -->
        <record id="product_normal_form_view" model="ir.ui.view">
            <field name="name">product.product.form</field>
            <field name="model">product.product</field>
            <field name="inherit_id" ref="product.product_normal_form_view"/>
            <field eval="8" name="priority"/>
            <field name="arch" type="xml">
                <field name="type" position="after">
                    <field name="product_type"/>
                    <field name="design_service"/>
                    <field name="design_name"/>
                    <field name="stitch_count"/>
                    <field name="line_data"/>
                    <field name="logo_description" string="Logo Description" />
                    <field name="logo_sc_description" string="Surcharge Description" />
                    <field name="logo_size" string="Logo Size" />
                </field>
                <xpath expr="//page[@name='notes']/group[@name='description_internal']" position="replace">
                    <div class="banners">
                        <field name="design_image_ids" mode="kanban">
                     <kanban>
                         <field name="image"/>
                         <templates>
                           <t t-name="kanban-box">
                               <div style="position: relative;width:100%;">
                              <div class="oe_module_vignette">
                                  <a type="open">
                                      <img t-att-src="'data:image/png;base64, ' + record.image.raw_value" class="oe_avatar oe_kanban_avatar_smallbox"/>
                                  </a>
                              </div>
                               </div>
                           </t>
                         </templates>
                     </kanban>
                   </field>
                    </div>
                </xpath>
            </field>
        </record>
        <!-- end -->
        <record id="product_template_form_view" model="ir.ui.view">
            <field name="name">product.template.common.form</field>
            <field name="model">product.template</field>
            <field name="inherit_id" ref="product.product_template_form_view"/>
            <field name="arch" type="xml">
                <xpath expr="//page[@name='general_information']/group/group[@name='group_general']" position="replace">
                    <group name="group_general_new">
                        <field name="type" invisible="1"/>
                        <field name="categ_id" string="Category" invisible="1"/>
                    </group>
                </xpath>
                <xpath expr="//page[@name='notes']/group[@name='description']" position="attributes">
                    <attribute name="invisible">1</attribute>
                </xpath>
                <xpath expr="/form/sheet/notebook/page[@name='sales']" position="attributes">
                    <attribute name="invisible">1</attribute>
                </xpath>
                <xpath expr="/form/sheet/notebook/page[@name='purchase']" position="attributes">
                    <attribute name="invisible">1</attribute>
                </xpath>
                <xpath expr="/form/sheet/notebook/page[@name='invoicing']" position="attributes">
                    <attribute name="invisible">1</attribute>
                </xpath>
            </field>
        </record>
        
        <!-- Add "Asset Category" to supplier invoices -->
        <record model="ir.ui.view" id="view_order_form_new">
            <field name="name">sale.order.form</field>
            <field name="model">sale.order</field>
            <field name="inherit_id" ref="sale.view_order_form"/>
            <field name="arch" type="xml">
                <xpath expr="//field[@name='partner_shipping_id']" position="after">
                    <field string="Shipping Date" name="ship_date" />
                    <field string="Require Date" name="require_date" />
                    <field string="Buyer" name="buyer_name" />
                </xpath>
                <xpath expr="//field[@name='payment_term_id']" position="after">
                    <field string="P.O.#" name="po_number" />
                    <field string="Job Name" name="job_title" />
                    <field string="Shipper" name="shipper_name" />
                    <field string="Instruction" name="instruction" />
                </xpath>
                <xpath expr="//field[@name='order_line']/tree/field[@name='product_id']" position="replace">
                    <field name="logo_name" string="Design Name" />
                    <field name="logo_service" string="Service" />
                    <field name="logo_colors_count" string="Colors" />
                    <field name="logo_stitch" string="Stitches" />
                    <field name="surcharge_description" string="Surcharge Description" />
                </xpath>
                <xpath expr="//field[@name='order_line']/tree/field[@name='tax_id']" position="replace">
                    <field name="tax_id" string="Tax Code" widget="many2many_tags" options="{'no_create': True}" domain="[('type_tax_use','=','sale'),('company_id','=',parent.company_id)]"
                                        attrs="{'readonly': [('qty_invoiced', '&gt;', 0)]}"/>
                </xpath>
                <xpath expr="//field[@name='order_line']/tree/field[@name='name']" position="replace">
                    <field name="logo_desc" string="Description" />
                </xpath>
                <xpath expr="/form/sheet/notebook/page[2]" position="before">
                    <page string="Garment Information">
                        <field name="order_garment" mode="tree">
                            <tree string="Garments" editable="bottom">
                                <field name="sequence" widget="handle"/>
                                <field name="garment_name" string="Garment Name"/>
                                <field name="garment_type" string="Type"/>
                                <field name="style" string="Style"/>
                                <field name="color" string="Color"/>
                                <field name="brand" string="Brand"/>
                                <field name="location" string="Location"/>
                                <field name="description" string="Description"/>
                                <field name="qty_formatted" string="Qty"/>
                                <field name="qty" string="Total Qty"/>
                            </tree>
                        </field>
                        <div class="oe_clear"/>
                    </page>
                </xpath>
            </field>
        </record>
        <!-- Modify "bom" bom line tree views -->
        <record model="ir.ui.view" id="mrp_bom_form_view_with_garment">
            <field name="name">mrp.bom.form</field>
            <field name="model">mrp.bom</field>
            <field name="inherit_id" ref="mrp.mrp_bom_form_view"/>
            <field name="arch" type="xml">
                <xpath expr="//field[@name='bom_line_ids']/tree" position="replace">
                    <tree string="Components" editable="bottom">
                        <field name="sequence" widget="handle"/>
                        <field name="product_id" context="{'default_type': 'product'}"/>
                        <field name="garment_type" />
                        <field name="garment_style" />
                        <field name="garment_brand" />
                        <field name="garment_color" />
                        <field name="garment_quantity" />
                        <field name="garment_location" />
                    </tree>
                </xpath>
            </field>
        </record>
        <record model="ir.ui.view" id="emb_purchase_order_tree">
            <field name="name">purchase.order.tree</field>
            <field name="model">purchase.order</field>
            <field name="inherit_id" ref="purchase.purchase_order_tree" />
            <field name="arch" type="xml">
                <xpath expr="//field[@name='amount_untaxed']" position="replace">
                    <field name="amount_untaxed" invisible="1" sum="Total Untaxed amount" string="Untaxed" widget="monetary"/>
                    <field name="stitch" />
                </xpath>
                <xpath expr="//field[@name='amount_total']" position="replace">
                    <field name="amount_total" invisible="1" sum="Total amount" widget="monetary"/>
                </xpath>
                <xpath expr="//field[@name='state']" position="replace">
                    <field name="state" invisible="1"/>
                </xpath>
                <xpath expr="//field[@name='invoice_status']" position="replace">
                    <field name="invoice_status" invisible="1"/>
                </xpath>
            </field>
        </record>
        <record model="ir.ui.view" id="emb_purchase_order_form">
			<field name="name">purchase.order.form</field>
			<field name="model">purchase.order</field>
			<field name="inherit_id" ref="purchase.purchase_order_form" />
			<field name="arch" type="xml">
                <xpath expr="//field[@name='order_line']/form/sheet/notebook/page[1]/field[@name='name']" position="replace">
                    <field name='p_design_image' widget="image" class="bpg_image oe_avatar" />
                </xpath>
				<xpath expr="//field[@name='order_line']/tree" position="replace">
					<tree string="Purchase Order Lines" editable="bottom">
						<field name="currency_id" invisible="1" />
						<field name="state" invisible="1" />
						<field name="sequence" widget="handle" />
						<field name="product_id" attrs="{'readonly': [('state', 'in', ('purchase', 'to approve','done', 'cancel'))]}" context="{'partner_id':parent.partner_id, 'quantity':product_qty,'uom':product_uom, 'company_id': parent.company_id}" force_save="1" />
						<field name="name" />
                        <field name="p_customer" />
                        <field name="p_design_size" />
                        <field name="p_design_size_unit" />
                        <field name="p_specital_instr" />
                        <field name="p_fabric" />
                        <field name="design_image"  widget="binary" filename="filename"/>
                        <field name="filename" invisible="1"/>
                        <field name="p_stitch" />
						<field name="move_dest_ids" invisible="1" />
						<field name="company_id" groups="base.group_multi_company" options="{'no_create': True}" />
						<field name="account_analytic_id" context="{'default_partner_id':parent.partner_id}" groups="purchase.group_analytic_accounting" />
						<field name="analytic_tag_ids" groups="purchase.group_analytic_accounting" widget="many2many_tags" options="{'color_field': 'color'}" />
						<field name="product_qty" invisible="1"/>
						<field name="qty_received" invisible="1" />
						<field name="qty_invoiced" invisible="1" />
			        	<field name="product_uom" invisible="1" groups="product.group_uom" attrs="{'readonly': [('state', 'in', ('purchase', 'done', 'cancel'))]}" force_save="1" />
						<field name="price_unit" invisible="1" />
						<field name="taxes_id" invisible="1" widget="many2many_tags" domain="[('type_tax_use','=','purchase')]" context="{'default_type_tax_use': 'purchase'}" options="{'no_create': True}" />
						<field name="price_subtotal" invisible="1" widget="monetary" />
					</tree>
				</xpath>
			</field>
		</record>
        <record model="ir.ui.view" id="emb_work_order_form">
			<field name="name">mrp.production.work.order.form</field>
            <field name="model">mrp.workorder</field>
			<field name="inherit_id" ref="mrp.mrp_production_workcenter_form_view_inherit" />
			<field name="arch" type="xml">
                <xpath expr="//field[@name='product_id']" position="after">
                    <field name="logo_file" filename="logo_file_name" />
                    <field name="logo_file_name" invisible="1"/>
                </xpath>
                <xpath expr="//field[@name='time_ids']/tree/field[@name='date_end']" position="after">
                    <field name="qty_production" string="Qty"/>
                </xpath>
            </field>
        </record>   

        <record id="hr_hr_employee_view_form21" model="ir.ui.view">
            <field name="name">hr.hr.employee.view.form21</field>
            <field name="model">hr.employee</field>
            <field name="inherit_id" ref="hr.view_employee_form"/>
            <field name="arch" type="xml">
                <data>
                    <xpath expr="//field[@name='work_phone']" position="after">
                        <field name="breaks" string="Breaks"/>
                        <field name="hire_date" string="Hire Date"/>
                    </xpath>
                    <xpath expr="//field[@name='coach_id']" position="after">
                        <field name="salary" string="Salary"/>
                        <field name="shift" string="Shift"/>
                    </xpath>
                </data>
            </field>
        </record>

        <record id="view_picking_form_custom" model="ir.ui.view">
            <field name="name">stock.picking.form.custom</field>
            <field name="model">stock.picking</field>
            <field name="inherit_id" ref="stock.view_picking_form"/>
            <field name="arch" type="xml">
                <data>
                    <xpath expr="//field[@name='move_lines']/tree" position="replace">
                        <tree decoration-danger="state != 'done' and quantity_done > reserved_availability and show_reserved_availability" decoration-muted="scrapped == True or state == 'cancel' or (state == 'done' and is_locked == True)" string="Stock Moves" editable="bottom">
                            <field name="name" invisible="1"/>
                            <field name="date_expected" invisible="1"/>
                            <field name="state" invisible="1" readonly="0"/>
                            <field name="picking_type_id" invisible="1"/>
                            <field name="scrapped" invisible="1"/>
                            <field name="picking_code" invisible="1"/>
                            <field name="product_type" invisible="1"/>
                            <field name="show_details_visible" invisible="1"/>
                            <field name="show_reserved_availability" invisible="1"/>
                            <field name="show_operations" invisible="1" readonly="1"/>
                            <field name="additional" invisible="1"/>
                            <field name="has_move_lines" invisible="1"/>
                            <field name="is_locked" invisible="1"/>
                            <field name="product_id" required="1" attrs="{'readonly': ['|', '&amp;', ('state', '!=', 'draft'), ('additional', '=', False), ('has_move_lines', '=', True)]}"/>
                            <field name="location_id"/>
                            <field name="location_dest_id"/>
                            <field name="is_initial_demand_editable" invisible="1"/>
                            <field name="is_quantity_done_editable" invisible="1"/>
                            <field name="product_uom_qty" string="Initial Demand" attrs="{'readonly': [('is_initial_demand_editable', '=', False)]}"/>
                            <field name="reserved_availability" string="Reserved" attrs="{'column_invisible': ['|', ('parent.state','=', 'done'), ('parent.picking_type_code', '=', 'incoming')]}"/>
                            <field name="quantity_done" string="Done" attrs="{'readonly': [('is_quantity_done_editable', '=', False)]}"/>
                            <field name="product_uom" attrs="{'readonly': [('state', '!=', 'draft'), ('additional', '=', False)]}" options="{'no_open': True, 'no_create': True}" string="Unit of Measure" groups="product.group_uom"/>
                            <button name="action_show_details" string="Register lots, packs, location" type="object" icon="fa-list" attrs="{'invisible': [('show_details_visible', '=', False)]}" options='{"warn": true}'/>
                        </tree>
                    </xpath>
                </data>
            </field>
        </record>  

        <record id="view_partner_emb_form" model="ir.ui.view">
            <field name="name">view_partner_emb_form</field>
            <field name="model">res.partner</field>
            <field name="inherit_id" ref="base.view_partner_form"/>
            <field name="arch" type="xml">
                <xpath expr="//field[@name='lang']" position="after">
                    <field name="f_tax_code"/>
                    <field name="f_tax_gst"/>
                    <field name="f_tax_pst"/>
                </xpath>
            </field>
        </record>
    </data>
</odoo>
